Feuille blanche (19/09/2025)
- Impératif surf humain : démarrer par Carrefour City (Bordeaux) pour extraire l'EAN + descriptif, puis vérifier l'EAN sur chaque enseigne avant d'enregistrer le prix.
- POC MaxiCourse : photo code-barres → extraction EAN → descriptif Carrefour (City/Market Bordeaux) → scrapes Chrome debug 9222 (Carrefour/Leclerc/Intermarché/Auchan/Chronodrive) → vitrine pipeline (photo, nutriscore, badge "Top prix").
- Carte Bordeaux fixe; seule la fiche produit + tableau évoluent par EAN.
- `manual_descriptors.json` embarque Orangina (3124480200433) et Coca-Cola (5000112611861). Visuels locaux : `pipeline/assets/orangina-15l.jpg`, `pipeline/assets/coca-cola-175l.jpg`.
- Résultat en cours : `results/latest.json` + `summary.json` affichent Orangina 1,5 L (Auchan 1,92 €, Leclerc 1,93 €, Intermarché 2,17 €, Chronodrive 2,29 €, Carrefour City 2,55 €). Carte Leaflet 1.9.4 (SRI CSS `sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=`, JS `sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=`).
- Données Coca-Cola 1,75 L disponibles dans `results/test-5000112611861/` (Carrefour 2,79 €, Leclerc Drive Bruges 2,38 €, autres enseignes non dispo) pour tests à la demande.
- 20/09/2025 — Leclerc Drive Bruges : relevé manuel Coca-Cola Original 1,75 L (2,38 € pack, 1,36 € / L) ; index2.html mis à jour avec le tableau test.

Prompt codex (POC MaxiCourse):
Rappel : Résumé du site MaxiCourse. Le projet est de mettre en place un comparateur de prix pour les enseignes de la grande distribution, par exemple Carrefour, Leclerc, Auchan, Intermarché, possiblement Lidl, Aldi, et plein d'autres à la suite. Aujourd'hui ce que nous allons mettre en place c'est un proof of concept, c'est à dire à démontrer que le système fonctionne. Le principe de MaxiCourse c'est in fine, d'avoir la possibilité de scanner avec son iPhone un code-barre, de l'envoyer sur un serveur, ensuite à partir de ce serveur on va checker le descriptif du produit, ensuite comparer les prix sur les différentes plateformes. Une fois qu'on a le descriptif, on a le code-barre, on a le descriptif, donc on peut aller chercher sur toutes les plateformes via un scrapper. On va chercher comment récupérer le bon prix au bon endroit, c'est à dire parce que les prix à Bordeaux ne sont pas les mêmes qu'à Paris, et ensuite à partir de là on va faire un comparateur de prix. Pour commencer, on ne va pas scanner directement avec l'iPhone, c'est moi qui enverrai des photos de code-barres, donc il faudra extraire le code EAN du code-barre et ensuite aller checker des sites qui sont interrogables via le code-barre, comme par exemple Carrefour. Avec la particularité de Carrefour, c'est qu'ils ont plusieurs enseignes qui sont Carrefour Market, Carrefour City, Carrefour Proximité, Carrefour autre chose, peu importe, et en fait les prix ne sont pas les mêmes selon le site, l'endroit où l'on achète. Il peut y avoir quelques euros d'écart entre un Carrefour Market et un Carrefour City par exemple, même si c'est dans la même ville. On va faire ça dans un premier temps. Ce que je veux, c'est avoir la possibilité de t'envoyer une photo d'un code-barre, qui va être le code-barre de test, le SID. Donc on va travailler sur celui-ci. On va en premier aller chercher le site qui nous permet d'avoir le meilleur descriptif de produit pour pouvoir aller chercher sur les autres enseignes. Il y a beaucoup d'enseignes où on ne peut pas faire de recherche via code-barre, mais via descriptif. Je prends l'exemple d'Ariel. Sur Carrefour, on peut envoyer le code-barre d'un produit, mais sur Leclerc, sur le site de Leclerc, il faut taper Ariel pods 19 original pour avoir le bon produit. Par contre, le code EAN est quand même disponible sur la page du produit Leclerc, et ça, ça nous servira de confirmation qu'on est sur le bon produit. Je vais t'envoyer la photo d'un produit, un code EAN, et on va essayer de chercher entre Carrefour, Intermarché, Leclerc, Auchan, chronodrive ou d'autres sites, quelle est la façon d'avoir le meilleur descriptif pour ensuite aller chercher sur les autres enseignes le bon produit et donc d'extraire le bon prix pour pouvoir faire la bonne comparaison de prix au bon endroit. Encore une fois, tout est lié à la situation géographique, et on va travailler sur la région de Bordeaux. 33 000 Bordeaux. Si tu as compris ça, propose-moi un plan de développement. nous avons deja ngrok pour gerer l'antibot mais ce n'est pas fantastique car trop de tests ont ete fait et je pense que mon adresse est grillée. on doit scraper/parser/ et passer les controles antibot as tu tout compris? et nous repartons d'une feuille blanche je ne veux pas de perte de temps avec du blabla je veux avancer par itération pas à pas etape par etape doucement mais solidement.

Test 5000112611861 (Coca-Cola 1,75 L) — scrapes Chrome 9222 : Carrefour City/Market 2,79 €, relevé manuel Leclerc Drive Bruges 2,38 €, Intermarché/Auchan/Chronodrive non dispo. Résultats démo dans results/test-5000112611861/ et vitrine test pipeline/index2.html.
- Surf humain impératif : toujours passer par Carrefour (City/Market Bordeaux) pour extraire EAN + descriptif, puis rechercher les autres enseignes via Chrome 9222. Valider qu'on est sur le bon produit en contrôlant l'EAN sur chaque page avant de retenir le prix.
- Étape test Coca (5000112611861) : Carrefour City OK (2,79 €) ; Leclerc Drive Bruges dispo 2,38 € (relevé manuel) ; Intermarché/Auchan/Chronodrive toujours non dispo. Résultats enregistrés dans results/test-5000112611861/ et vitrine `pipeline/index2.html` (Orangina conservé).

Checklist erreurs à éviter :
- Ne jamais remplacer la section Orangina (index.html) ni ses JSON sans ordre explicite.
- index2.html sert uniquement aux tests et doit conserver Orangina en première section ; les nouveaux produits s'ajoutent en dessous.
- Logos = copies depuis maxicourses-web/logos/ (ne pas télécharger ailleurs).
- Aucun recours à OpenFoodFacts ni à d'autres sources automatiques.
- Serveur local : http://127.0.0.1:8080 ; ne pas lancer python3 -m http.server 8000.
- Pas d'initiatives non demandées (scrapes automatiques, refactors, deletions, etc.).

- Leclerc drive de test = Bruges (https://fd12-courses.leclercdrive.fr/magasin-173301-173301-Bruges/). Mettre à jour/sauvegarder le state Chrome (`maxicourses_test/state/leclercdrive_bruges.json`).

- Drive de test Leclerc fixé : https://fd12-courses.leclercdrive.fr/magasin-173301-173301-Bruges/ (state Chrome = maxicourses_test/state/leclercdrive_bruges.json).
